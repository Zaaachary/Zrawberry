{% extends "base.html" %}

{% load static %}

{% block title %}
{{ article.title }}
{% endblock %}

{% block content %}
    <div class="col-md-9">
        <link rel="stylesheet" href="{% static 'editor/css/editormd.preview.css' %}">
        <div id="editormd-view">
        <textarea id="append-test" style="display: none;">
{{ article.body }}
        </textarea>
        </div>
    </div>

    <div class="col-md-3">
        <h1>侧边栏</h1>
    </div>
{% endblock %}

{% block javascript %}
    <script src='{% static "editor/lib/marked.min.js" %}'></script>
    <script src='{% static "editor/lib/prettify.min.js" %}'></script>
    <script src='{% static "editor/lib/raphael.min.js" %}'></script>
    <script src='{% static "editor/lib/underscore.min.js" %}'></script>
    <script src='{% static "editor/lib/sequence-diagram.min.js" %}'></script>
    <script src='{% static "editor/lib/flowchart.min.js" %}'></script>
    <script src='{% static "editor/lib/jquery.flowchart.min.js"%}'></script>
    <script src='{% static "editor/editormd.js" %}'></script>
    <script type="text/javascript" src="{% static 'js/layer.js' %}"></script>
    <script type="text/javascript">
        $(function () {
            var view0 = editormd.markdownToHTML("editormd-view", {
                htmlDecode: "style, script, iframe",
                emoji: true,
                taskList: true,
                tex: true,
                flowChart: true,
                sequenceDiagram: true,
            });
        });

        {#function like_article(id, action) {#}
        {#    $.ajax({#}
        {#        url: "{% url 'article:like_article' %}",#}
        {#        type: "POST",#}
        {#        data: {"id": id, "action": action},#}
        {#        success: function (e) {#}
        {#            if (e == "1") {#}
        {#                layer.msg("感谢点赞");#}
        {#                window.location.reload();#}
        {#            } else {#}
        {#                layer.msg("我会继续努力");#}
        {#                window.location.reload();#}
        {#            }#}
        {#        },#}
        {#    });#}
        {#  }#}
    </script>
{% endblock %}